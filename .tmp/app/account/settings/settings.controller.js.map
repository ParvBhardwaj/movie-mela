{"version":3,"sources":["app/account/settings/settings.controller.js"],"names":["SettingsController","Auth","submitted","form","$valid","changePassword","user","oldPassword","newPassword","then","message","catch","password","$setValidity","errors","other","angular","module","controller"],"mappings":"AAAA;;;;;;IAEMA,kB;AAIJ,8BAAYC,IAAZ,EAAkB;AAAA;;AAAA,SAFlBC,SAEkB,GAFN,KAEM;;AAChB,SAAKD,IAAL,GAAYA,IAAZ;AAED;AAND;;;;;mCAQeE,I,EAAM;AAAA;;AACnB,WAAKD,SAAL,GAAiB,IAAjB;;AAEA,UAAIC,KAAKC,MAAT,EAAiB;AACf,aAAKH,IAAL,CAAUI,cAAV,CAAyB,KAAKC,IAAL,CAAUC,WAAnC,EAAgD,KAAKD,IAAL,CAAUE,WAA1D,EACGC,IADH,CACQ,YAAM;AACV,gBAAKC,OAAL,GAAe,gCAAf;AACD,SAHH,EAIGC,KAJH,CAIS,YAAM;AACXR,eAAKS,QAAL,CAAcC,YAAd,CAA2B,UAA3B,EAAuC,KAAvC;AACA,gBAAKC,MAAL,GAAc,EAAd;AACA,gBAAKA,MAAL,CAAYC,KAAZ,GAAoB,oBAApB;AACA,gBAAKL,OAAL,GAAe,EAAf;AACD,SATH;AAUD;AACF;;;;;;AAGHM,QAAQC,MAAR,CAAe,cAAf,EACGC,UADH,CACc,oBADd,EACoClB,kBADpC","file":"settings.controller.js","sourcesContent":["'use strict';\n\nclass SettingsController {\n  // errors = {};\n  submitted = false;\n\n  constructor(Auth) {\n    this.Auth = Auth;\n    \n  }\n\n  changePassword(form) {\n    this.submitted = true;\n\n    if (form.$valid) {\n      this.Auth.changePassword(this.user.oldPassword, this.user.newPassword)\n        .then(() => {\n          this.message = 'Password successfully changed.';\n        })\n        .catch(() => {\n          form.password.$setValidity('mongoose', false);\n          this.errors = {};\n          this.errors.other = 'Incorrect password';\n          this.message = '';\n        });\n    }\n  }\n}\n\nangular.module('movieMelaApp')\n  .controller('SettingsController', SettingsController);\n"]}