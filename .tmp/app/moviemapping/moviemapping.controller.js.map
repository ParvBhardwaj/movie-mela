{"version":3,"sources":["app/moviemapping/moviemapping.controller.js"],"names":["MoviemappingComponent","$http","$scope","socket","map","mmrec","time","date","allmoviesmappingsData","$on","unsyncUpdates","vtime","hr","min","ampm","push","vdate","sdate","toJSON","substr","movie","movieObj","Title","alert","JSON","stringify","post","angular","toJson","put","_id","Status","console","log","get","then","alltheaterData","response","data","syncUpdates","allMoviesData","module","component","templateUrl","controller","controllerAs"],"mappings":"AAAA;;;;;;AAEA,CAAC,YAAY;AAAA,MAELA,qBAFK;AAGT,mCAAYC,KAAZ,EAAmBC,MAAnB,EAA2BC,MAA3B,EAAmC;AAAA;;AAEjC,WAAKF,KAAL,GAAaA,KAAb;AACA,WAAKE,MAAL,GAAcA,MAAd;AACA,WAAKC,GAAL,GAAW,EAAX;AACA,WAAKC,KAAL,GAAa,EAAb;AACA,WAAKA,KAAL,CAAWC,IAAX,GAAkB,EAAlB;AACA,WAAKD,KAAL,CAAWE,IAAX,GAAkB,EAAlB;;AAEA,WAAKC,qBAAL,GAA6B,EAA7B;;AAGAN,aAAOO,GAAP,CAAW,UAAX,EAAuB,YAAY;AACjCN,eAAOO,aAAP,CAAqB,cAArB;AACD,OAFD;AAGD;;AAlBQ;AAAA;AAAA,iCAmBE;AACT;AACA,YAAIC,QAAQ,KAAKN,KAAL,CAAWO,EAAX,GAAgB,GAAhB,GAAsB,KAAKP,KAAL,CAAWQ,GAAjC,GAAuC,GAAvC,GAA6C,KAAKR,KAAL,CAAWS,IAApE;AACA;AACA,aAAKT,KAAL,CAAWC,IAAX,CAAgBS,IAAhB,CAAqBJ,KAArB;AACD;AAxBQ;AAAA;AAAA,iCAyBE;AACT;;AAEA,YAAIK,QAAQ,KAAKX,KAAL,CAAWY,KAAX,CAAiBC,MAAjB,GAA0BC,MAA1B,CAAiC,CAAjC,EAAoC,EAApC,CAAZ;AACA;AACA,aAAKd,KAAL,CAAWE,IAAX,CAAgBQ,IAAhB,CAAqBC,KAArB;AAED;AAhCQ;AAAA;AAAA,wCAiCS;AAChB,aAAKX,KAAL,CAAWe,KAAX,GAAmB,KAAKf,KAAL,CAAWgB,QAAX,CAAoBC,KAAvC;AACA;AACAC,cAAMC,KAAKC,SAAL,CAAe,KAAKpB,KAApB,CAAN;;AAEA,aAAKJ,KAAL,CAAWyB,IAAX,CAAgB,oBAAhB,EACEC,QAAQC,MAAR,CAAe,KAAKvB,KAApB,CADF;;AAIA,aAAKJ,KAAL,CAAW4B,GAAX,CAAe,iBAAiB,KAAKxB,KAAL,CAAWgB,QAAX,CAAoBS,GAApD,EACE;AACEC,kBAAQ;AADV,SADF;;AAMAC,gBAAQC,GAAR,CAAY,KAAK5B,KAAjB;AACA;AACD;AAlDQ;AAAA;AAAA,gCAmDC;AAAA;;AACR,aAAKJ,KAAL,CAAWiC,GAAX,CAAe,eAAf,EAAgCC,IAAhC,CAAqC,oBAAY;AAC/C,gBAAKC,cAAL,GAAsBC,SAASC,IAA/B;AACA,gBAAKnC,MAAL,CAAYoC,WAAZ,CAAwB,UAAxB,EAAoC,MAAKH,cAAzC;AACA;AACD,SAJD;;AAMA,aAAKnC,KAAL,CAAWiC,GAAX,CAAe,aAAf,EAA8BC,IAA9B,CAAmC,oBAAY;AAC7C,gBAAKK,aAAL,GAAqBH,SAASC,IAA9B;AACA,gBAAKnC,MAAL,CAAYoC,WAAZ,CAAwB,QAAxB,EAAkC,MAAKC,aAAvC;AACD,SAHD;AAID;AA9DQ;;AAAA;AAAA,OAgEV;;AAEDb,UAAQc,MAAR,CAAe,cAAf,EACGC,SADH,CACa,cADb,EAC6B;AACzBC,iBAAa,oCADY;AAEzBC,gBAAY5C,qBAFa;AAGzB6C,kBAAc;AAHW,GAD7B;AAOD,CAzED","file":"moviemapping.controller.js","sourcesContent":["'use strict';\r\n\r\n(function () {\r\n\r\n  class MoviemappingComponent {\r\n    constructor($http, $scope, socket) {\r\n\r\n      this.$http = $http;\r\n      this.socket = socket;\r\n      this.map = {};\r\n      this.mmrec = {};\r\n      this.mmrec.time = [];\r\n      this.mmrec.date = [];\r\n\r\n      this.allmoviesmappingsData = {};\r\n\r\n\r\n      $scope.$on('$destroy', function () {\r\n        socket.unsyncUpdates('moviemapping');\r\n      });\r\n    }\r\n    pushTime() {\r\n      // push selected time in array \r\n      var vtime = this.mmrec.hr + ':' + this.mmrec.min + ' ' + this.mmrec.ampm;\r\n      // alert(vtime);\r\n      this.mmrec.time.push(vtime);\r\n    }\r\n    pushDate() {\r\n      //push selected date in array\r\n\r\n      var vdate = this.mmrec.sdate.toJSON().substr(0, 10);\r\n      // alert(vdate);\r\n      this.mmrec.date.push(vdate);\r\n\r\n    }\r\n    Addmoivemapping() {\r\n      this.mmrec.movie = this.mmrec.movieObj.Title;\r\n      debugger;\r\n      alert(JSON.stringify(this.mmrec));\r\n\r\n      this.$http.post('/api/moviemappings',\r\n        angular.toJson(this.mmrec)\r\n      );\r\n\r\n      this.$http.put('/api/movies/' + this.mmrec.movieObj._id,\r\n        {\r\n          Status: 'running'\r\n        }\r\n      );\r\n\r\n      console.log(this.mmrec);\r\n      // this.mmrec = {};\r\n    }\r\n    $onInit() {\r\n      this.$http.get('/api/theaters').then(response => {\r\n        this.alltheaterData = response.data;\r\n        this.socket.syncUpdates('theaters', this.alltheaterData);\r\n        // alert(this.alltheaterData);\r\n      });\r\n\r\n      this.$http.get('/api/movies').then(response => {\r\n        this.allMoviesData = response.data;\r\n        this.socket.syncUpdates('movies', this.allMoviesData);\r\n      });\r\n    }\r\n\r\n  }//end class\r\n\r\n  angular.module('movieMelaApp')\r\n    .component('moviemapping', {\r\n      templateUrl: 'app/moviemapping/moviemapping.html',\r\n      controller: MoviemappingComponent,\r\n      controllerAs: 'moviemappingCtrl'\r\n    });\r\n\r\n})();\r\n"]}