{"version":3,"sources":["app/movie/movie.controller.js"],"names":["MovieComponent","$http","$scope","socket","movieData","allMoviesData","$on","unsyncUpdates","alert","post","angular","toJson","console","log","Name","Year","poster","get","then","response","data","syncUpdates","JSON","stringify","thing","delete","_id","module","component","templateUrl","controller","controllerAs"],"mappings":"AAAA;;;;;;AAEA,CAAC,YAAY;AAAA,MAELA,cAFK;AAGT,4BAAYC,KAAZ,EAAmBC,MAAnB,EAA2BC,MAA3B,EAAmC;AAAA;;AACjC,WAAKF,KAAL,GAAaA,KAAb;AACA,WAAKE,MAAL,GAAcA,MAAd;AACA,WAAKC,SAAL,GAAiB,EAAjB;AACA,WAAKC,aAAL,GAAqB,EAArB;;AAEAH,aAAOI,GAAP,CAAW,UAAX,EAAuB,YAAY;AACjCH,eAAOI,aAAP,CAAqB,OAArB;AACD,OAFD;AAGD;;AAZQ;AAAA;AAAA,kCAcG;AACVC,cAAM,QAAN;AACA,aAAKP,KAAL,CAAWQ,IAAX,CAAgB,aAAhB;AACE;AACA;AACA;AACA;;AAEA;AACAC,gBAAQC,MAAR,CAAe,KAAKP,SAApB,CAPF;AASAQ,gBAAQC,GAAR,CAAY,KAAKT,SAAjB;AACA,aAAKU,IAAL,GAAY,EAAZ;AACA,aAAKC,IAAL,GAAY,EAAZ;AACA,aAAKC,MAAL,GAAc,EAAd;AAED;AA9BQ;AAAA;AAAA,gCAgCC;AAAA;;AACR,aAAKf,KAAL,CAAWgB,GAAX,CAAe,aAAf,EAA8BC,IAA9B,CAAmC,oBAAY;AAC7C,gBAAKb,aAAL,GAAqBc,SAASC,IAA9B;AACA,gBAAKjB,MAAL,CAAYkB,WAAZ,CAAwB,OAAxB,EAAiC,MAAKhB,aAAtC;AACD,SAHD;AAID;AArCQ;AAAA;AAAA,qCAuCM;AAAA;;AACb;AACA;AACA,aAAKJ,KAAL,CAAWgB,GAAX,CAAe,+BAA+B,KAAKH,IAApC,GAA2C,KAA3C,GAAmD,KAAKC,IAAxD,GAA+D,oBAA9E,EACGG,IADH,CACQ,oBAAY;AAChBV,gBAAMc,KAAKC,SAAL,CAAeJ,QAAf,CAAN;AACA,iBAAKf,SAAL,GAAiBe,SAASC,IAA1B;AACA,iBAAKjB,MAAL,CAAYkB,WAAZ,CAAwB,OAAxB,EAAiC,OAAKjB,SAAtC;AACD,SALH;AAMD;AAhDQ;AAAA;AAAA,kCAkDGoB,KAlDH,EAkDU;AACjBZ,gBAAQC,GAAR,CAAY,mBAAmBW,KAA/B;AACA,aAAKvB,KAAL,CAAWwB,MAAX,CAAkB,iBAAiBD,MAAME,GAAzC;AACD;AArDQ;;AAAA;AAAA,OAyDT;;AAEFhB,UAAQiB,MAAR,CAAe,cAAf,EACGC,SADH,CACa,OADb,EACsB;AAClBC,iBAAa,sBADK;AAElBC,gBAAY9B,cAFM;AAGlB+B,kBAAc;AAHI,GADtB;AAOD,CAlED","file":"movie.controller.js","sourcesContent":["'use strict';\r\n\r\n(function () {\r\n\r\n  class MovieComponent {\r\n    constructor($http, $scope, socket) {\r\n      this.$http = $http;\r\n      this.socket = socket;\r\n      this.movieData = {};\r\n      this.allMoviesData = {};\r\n\r\n      $scope.$on('$destroy', function () {\r\n        socket.unsyncUpdates('movie');\r\n      });\r\n    }\r\n\r\n    AddMovies() {\r\n      alert(\"hogyaa\");\r\n      this.$http.post('/api/movies',\r\n        // {\r\n        //   Title: this.movieData.Title,\r\n        //   Year: this.movieData.Year,\r\n        //   Director: this.movieData.Directorw\r\n\r\n        // }\r\n        angular.toJson(this.movieData)\r\n      );\r\n      console.log(this.movieData);\r\n      this.Name = '';\r\n      this.Year = '';\r\n      this.poster = '';\r\n\r\n    }\r\n\r\n    $onInit() {\r\n      this.$http.get('/api/movies').then(response => {\r\n        this.allMoviesData = response.data;\r\n        this.socket.syncUpdates('movie', this.allMoviesData);\r\n      });\r\n    }\r\n\r\n    getOmdbMovie() {\r\n      // alert('data at search ' + this.Name + this.Year);\r\n      //http://www.omdbapi.com/?t=dangal&y=2016\r\n      this.$http.get('http://www.omdbapi.com/?t=' + this.Name + '&y=' + this.Year + '&plot=short&r=json')\r\n        .then(response => {\r\n          alert(JSON.stringify(response));\r\n          this.movieData = response.data;\r\n          this.socket.syncUpdates('movie', this.movieData);\r\n        });\r\n    }\r\n\r\n    deleteThing(thing) {\r\n      console.log(\"deleting movie\" + thing);\r\n      this.$http.delete('/api/movies/' + thing._id);\r\n    }\r\n\r\n\r\n\r\n  } //end class\r\n\r\n  angular.module('movieMelaApp')\r\n    .component('movie', {\r\n      templateUrl: 'app/movie/movie.html',\r\n      controller: MovieComponent,\r\n      controllerAs: 'movieCtrl'\r\n    });\r\n\r\n})();\r\n"]}